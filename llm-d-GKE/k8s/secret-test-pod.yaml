apiVersion: v1
kind: Pod
metadata:
  name: secret-test
  namespace: vllm
spec:
  # This section tells the pod to use our secret
  imagePullSecrets:
    - name: rh-pull
  containers:
    # This is a small, official Red Hat image that requires authentication
    - name: tester
      image: registry.access.redhat.com/ubi9/ubi-minimal:latest
      command: ["/bin/sh", "-c", "echo 'SUCCESS: Image pull was authorized. The secret works!' && sleep 30"]
  # This ensures the pod doesn't try to restart after finishing
  restartPolicy: Never
